{% extends '@MoonManager/base.html.twig' %}

{% block title %}
	Connexion
{% endblock %}

{% block body %}
	{% if error %}
		<div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
	{% endif %}
	{% if app.user %}
		<div class="mb-6 text-center">
			Bienvenue
			<a href="{{ path('user_show', {'id': app.user.id}) }}">
				<u>{{ app.user.firstname~' '~app.user.lastname }}</u>
			</a>
		</div>
	{% endif %}
	{% for notice in app.flashes('notice') %}
		<p>
			{{ notice }}
		</p>
	{% endfor %}
	<div class="content" style="margin-top:4rem; padding-bottom:0em;">
		<div class="row">
			<div class="col-lg-4 col-md-3"></div>
			<div class="col-lg-4 col-md-3">
				<img src="{{ absolute_url(asset('bundles/moonmanager/medias/MoonManagerLogo.png')) }}" class="mx-auto d-block" style="height:200px; " alt="">
				<div class="card" style="margin-top:2rem; border:none;">

					<div class="card-body">
						<form action="{{ path('mws_user_login') }}" method="post" class="login-form">
							<h1 class="h3 mb-3 font-weight-normal text-center">Se connecter</h1>
							<div>
								<label for="username">Nom d'utilisateur:</label>
								<input type="text" id="username" name="_username" value="{{ last_username }}">
							</div>
							<div>
								<label for="password">Mot de passe:</label>
								<input type="password" id="password" name="_password">
							</div>

							{# TODO : If you want to control the URL the user is redirected to on success #}
							{# <input type="hidden" name="_target_path" value="/account"> #}

							<button type="submit">Se connecter</button>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
